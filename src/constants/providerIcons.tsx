/**
 * Provider Icons - Centralized icon components for AI providers.
 *
 * Usage:
 *   import { PROVIDER_ICONS, getProviderIcon } from '@/constants/providerIcons';
 *   const Icon = getProviderIcon('openrouter');
 *   <Icon />
 */

import React from 'react';
import { SiOpenai, SiAnthropic } from 'react-icons/si';
import { FaGoogle } from 'react-icons/fa';

// =============================================================================
// Provider Types
// =============================================================================

/**
 * API sources - which service is used to call the model
 */
export type ApiSource = 'replicate' | 'fal' | 'openrouter' | 'ollama' | 'lmstudio';

/**
 * Model origins - the original provider/creator of the model
 */
export type ModelOrigin =
  | 'openai'
  | 'anthropic'
  | 'google'
  | 'meta'
  | 'mistral'
  | 'deepseek'
  | 'qwen'
  | 'stability'
  | 'black-forest-labs'
  | 'replicate'
  | 'fal'
  | 'openrouter'
  | 'ollama'
  | 'lmstudio';

// =============================================================================
// Custom SVG Icons
// =============================================================================

export const OpenRouterIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg
    viewBox="0 0 512 512"
    width="1em"
    height="1em"
    fill="currentColor"
    stroke="currentColor"
    {...props}
  >
    <path
      d="M3 248.945C18 248.945 76 236 106 219C136 202 136 202 198 158C276.497 102.293 332 120.945 423 120.945"
      strokeWidth="90"
      fill="none"
    />
    <path d="M511 121.5L357.25 210.268L357.25 32.7324L511 121.5Z" />
    <path
      d="M0 249C15 249 73 261.945 103 278.945C133 295.945 133 295.945 195 339.945C273.497 395.652 329 377 420 377"
      strokeWidth="90"
      fill="none"
    />
    <path d="M508 376.445L354.25 287.678L354.25 465.213L508 376.445Z" />
  </svg>
);

export const ReplicateIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 1000 1000" width="1em" height="1em" fill="currentColor" {...props}>
    <polygon points="1000,427.6 1000,540.6 603.4,540.6 603.4,1000 477,1000 477,427.6" />
    <polygon points="1000,213.8 1000,327 364.8,327 364.8,1000 238.4,1000 238.4,213.8" />
    <polygon points="1000,0 1000,113.2 126.4,113.2 126.4,1000 0,1000 0,0" />
  </svg>
);

export const OllamaIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 512 512"
    width="1em"
    height="1em"
    {...props}
  >
    <path
      fill="currentColor"
      fillRule="evenodd"
      clipRule="evenodd"
      d="M168.64 23.253c4.608 1.814 8.768 4.8 12.544 8.747 6.293 6.528 11.605 15.872 15.659 26.944 4.074 11.136 6.72 23.467 7.722 35.84a107.824 107.824 0 0143.712-13.568l1.088-.085c18.56-1.494 36.907 1.856 52.907 10.112a103.091 103.091 0 016.336 3.626c1.067-12.138 3.669-24.192 7.68-35.072 4.053-11.093 9.365-20.416 15.637-26.965a35.628 35.628 0 0112.566-8.747c5.482-2.133 11.306-2.517 16.981-.896 8.555 2.432 15.893 7.851 21.675 15.723 5.29 7.19 9.258 16.405 11.968 27.456 4.906 19.925 5.76 46.144 2.453 77.76l1.131.853.554.406c16.15 12.288 27.392 29.802 33.344 50.133 9.28 31.723 4.608 67.307-11.392 87.211l-.384.448.043.064c8.896 16.256 14.293 33.429 15.445 51.2l.043.64c1.365 22.72-4.267 45.589-17.365 68.053l-.15.213.214.512c10.069 24.683 13.226 49.536 9.344 74.368l-.128.832a13.888 13.888 0 01-15.936 11.435 13.83 13.83 0 01-11.31-10.43 13.828 13.828 0 01-.21-5.399c3.562-22.038.213-44.139-10.24-66.624a13.713 13.713 0 01.853-13.163l.085-.128c12.886-19.712 18.219-39.04 17.067-58.027-.981-16.618-6.933-32.938-17.067-48.49a13.737 13.737 0 013.84-18.902l.192-.128c5.184-3.392 9.963-12.053 12.374-23.893a90.218 90.218 0 00-2.027-42.112c-4.373-14.933-12.373-27.392-23.573-35.904-12.694-9.685-29.504-14.357-50.774-13.013a13.93 13.93 0 01-13.482-7.915c-6.699-14.187-16.47-24.341-28.651-30.635a70.145 70.145 0 00-37.803-7.082c-26.56 2.112-49.984 17.088-56.96 35.968a13.91 13.91 0 01-13.013 9.066c-22.763.043-40.384 5.376-53.269 14.998-11.136 8.32-18.731 19.946-22.742 33.877a86.824 86.824 0 00-1.45 40.235c2.389 11.904 7.061 21.76 12.416 27.072l.17.149c4.523 4.416 5.483 11.307 2.326 16.747-7.68 13.269-13.419 33.045-14.358 52.053-1.066 21.717 3.968 40.576 15.339 54.101l.341.406a13.711 13.711 0 012.027 14.72c-12.288 26.368-16.064 48.042-11.989 65.109a13.91 13.91 0 01-27.072 6.357c-5.184-21.717-1.664-46.592 10.09-74.624l.299-.746-.17-.256a92.574 92.574 0 01-12.758-27.926l-.107-.405a122.965 122.965 0 01-3.776-38.08c.939-19.413 5.931-39.296 13.27-55.253l.256-.555-.043-.043c-6.25-8.917-10.88-20.33-13.44-32.96l-.107-.512a114.176 114.176 0 011.984-53.12c5.59-19.52 16.576-36.288 32.768-48.405 1.28-.96 2.624-1.92 3.968-2.816-3.392-31.851-2.538-58.24 2.39-78.293 2.709-11.051 6.698-20.267 11.989-27.456 5.76-7.851 13.099-13.27 21.653-15.723 5.675-1.621 11.52-1.259 17.003.896v.021zm87.808 193.92c19.968 0 38.4 6.678 52.181 18.24 13.44 11.243 21.44 26.347 21.44 41.387 0 18.944-8.661 33.707-24.17 43.136-13.227 8-30.955 11.883-51.264 11.883-21.526 0-39.915-5.526-53.184-15.659-13.163-10.027-20.544-24.107-20.544-39.36 0-15.083 8.49-30.229 22.528-41.515 14.25-11.456 33.066-18.112 53.013-18.112zm0 19.115a65.498 65.498 0 00-40.875 13.867c-9.834 7.893-15.402 17.813-15.402 26.666 0 9.131 4.48 17.686 13.013 24.192 9.707 7.403 23.979 11.691 41.451 11.691 17.045 0 31.424-3.136 41.216-9.088 9.877-5.973 14.933-14.635 14.933-26.816 0-9.024-5.248-18.987-14.571-26.795-10.325-8.64-24.32-13.717-39.765-13.717zm14.123 25.813l.085.086a7.431 7.431 0 01-1.195 10.453l-6.229 4.907v9.514a7.999 7.999 0 01-8.021 7.958 8.004 8.004 0 01-8.022-7.958v-9.813l-5.781-4.651a7.4 7.4 0 01-1.109-10.453 7.53 7.53 0 0110.538-1.088l4.587 3.669 4.693-3.712a7.533 7.533 0 0110.454 1.088zm-107.52-40.938c10.197 0 18.496 8.32 18.496 18.581a18.564 18.564 0 01-18.518 18.581 18.559 18.559 0 01-18.496-18.56 18.565 18.565 0 015.399-13.129 18.609 18.609 0 0113.119-5.473zm185.728 0c10.24 0 18.517 8.32 18.517 18.581a18.559 18.559 0 01-18.517 18.581 18.56 18.56 0 01-18.496-18.56 18.56 18.56 0 0118.496-18.602zM158.72 49.067l-.064.042a14.06 14.06 0 00-6.08 5.078l-.107.128c-2.944 4.032-5.504 9.962-7.424 17.749-3.626 14.763-4.608 34.795-2.645 59.349 9.173-2.73 19.179-4.437 29.952-5.056l.213-.021.406-.725a69.41 69.41 0 013.157-5.099c2.624-16.448.469-36.096-5.397-52.139-2.859-7.765-6.336-13.866-9.664-17.344a13.403 13.403 0 00-2.283-1.92l-.064-.042zm195.712.853l-.043.021a13.396 13.396 0 00-2.282 1.92c-3.328 3.478-6.827 9.6-9.664 17.366-6.187 16.938-8.256 37.888-4.907 54.869l1.237 2.069.171.299h.64a110.599 110.599 0 0129.504 5.013c1.984-24.384 1.045-44.288-2.538-58.944-1.92-7.808-4.502-13.738-7.446-17.77a14.05 14.05 0 00-4.672-4.843z"
    />
  </svg>
);

export const LMStudioIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg
    viewBox="0 0 24 24"
    width="1em"
    height="1em"
    fill="currentColor"
    fillRule="evenodd"
    {...props}
  >
    <path
      d="M2.84 2a1.273 1.273 0 100 2.547h14.107a1.273 1.273 0 100-2.547H2.84zM7.935 5.33a1.273 1.273 0 000 2.548H22.04a1.274 1.274 0 000-2.547H7.935zM3.624 9.935c0-.704.57-1.274 1.274-1.274h14.106a1.274 1.274 0 010 2.547H4.898c-.703 0-1.274-.57-1.274-1.273zM1.273 12.188a1.273 1.273 0 100 2.547H15.38a1.274 1.274 0 000-2.547H1.273zM3.624 16.792c0-.704.57-1.274 1.274-1.274h14.106a1.273 1.273 0 110 2.547H4.898c-.703 0-1.274-.57-1.274-1.273zM13.029 18.849a1.273 1.273 0 100 2.547h9.698a1.273 1.273 0 100-2.547h-9.698z"
      fillOpacity=".3"
    />
    <path d="M2.84 2a1.273 1.273 0 100 2.547h10.287a1.274 1.274 0 000-2.547H2.84zM7.935 5.33a1.273 1.273 0 000 2.548H18.22a1.274 1.274 0 000-2.547H7.935zM3.624 9.935c0-.704.57-1.274 1.274-1.274h10.286a1.273 1.273 0 010 2.547H4.898c-.703 0-1.274-.57-1.274-1.273zM1.273 12.188a1.273 1.273 0 100 2.547H11.56a1.274 1.274 0 000-2.547H1.273zM3.624 16.792c0-.704.57-1.274 1.274-1.274h10.286a1.273 1.273 0 110 2.547H4.898c-.703 0-1.274-.57-1.274-1.273zM13.029 18.849a1.273 1.273 0 100 2.547h5.78a1.273 1.273 0 100-2.547h-5.78z" />
  </svg>
);

export const MetaIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" {...props}>
    <path d="M6.915 4.03c-1.968 0-3.683 1.28-4.871 3.113C.704 9.208 0 11.883 0 14.449c0 .706.07 1.369.21 1.973a4.892 4.892 0 0 0 1.227 2.287c.532.56 1.175.834 1.903.834 1.014 0 2.071-.64 3.117-1.724l.09-.093.091.093c1.046 1.083 2.103 1.724 3.116 1.724.728 0 1.371-.274 1.903-.834a4.892 4.892 0 0 0 1.227-2.287c.14-.604.21-1.267.21-1.973 0-2.566-.704-5.24-2.044-7.306-1.188-1.833-2.903-3.113-4.87-3.113h-.265zm0 1.59h.266c1.405 0 2.696.976 3.66 2.464 1.091 1.684 1.706 3.95 1.706 6.365 0 .544-.054 1.05-.155 1.488-.103.44-.258.82-.467 1.116a.887.887 0 0 1-.762.405c-.615 0-1.386-.485-2.226-1.357l-.905-.937-.905.937c-.84.872-1.611 1.357-2.226 1.357a.887.887 0 0 1-.762-.405 3.247 3.247 0 0 1-.467-1.116 6.77 6.77 0 0 1-.155-1.488c0-2.414.615-4.681 1.706-6.365.964-1.488 2.255-2.464 3.66-2.464h.032zM17.085 4.03c-1.968 0-3.683 1.28-4.87 3.113-.376.58-.705 1.218-.98 1.896a10.07 10.07 0 0 1 1.784 1.327c.273-.726.612-1.403 1.01-2.009.963-1.488 2.254-2.464 3.66-2.464h.033c1.405 0 2.696.976 3.66 2.464 1.091 1.684 1.705 3.95 1.705 6.365 0 .544-.053 1.05-.154 1.488-.103.44-.258.82-.467 1.116a.887.887 0 0 1-.762.405c-.615 0-1.386-.485-2.226-1.357l-.905-.937-.905.937c-.81.84-1.555 1.324-2.16 1.357a6.14 6.14 0 0 1-.235 1.519 4.8 4.8 0 0 1-.06.188c.505.18 1.01.278 1.503.278.728 0 1.372-.274 1.904-.834a4.892 4.892 0 0 0 1.226-2.287c.14-.604.21-1.267.21-1.973 0-2.566-.704-5.24-2.043-7.306-1.188-1.833-2.903-3.113-4.871-3.113h-.066z" />
  </svg>
);

export const MistralIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" {...props}>
    <path d="M3.428 3.4h3.429v3.428H3.428V3.4zm13.714 0h3.429v3.428h-3.429V3.4zM3.428 6.828h3.429v3.429H3.428V6.828zm6.857 0h3.429v3.429h-3.429V6.828zm6.857 0h3.429v3.429h-3.429V6.828zM0 10.257h3.428v3.429H0v-3.429zm6.857 0h3.429v3.429H6.857v-3.429zm6.857 0h3.429v3.429h-3.429v-3.429zm6.857 0H24v3.429h-3.429v-3.429zM3.428 13.686h3.429v3.428H3.428v-3.428zm6.857 0h3.429v3.428h-3.429v-3.428zm6.857 0h3.429v3.428h-3.429v-3.428zM3.428 17.114h3.429v3.429H3.428v-3.429zm13.714 0h3.429v3.429h-3.429v-3.429z" />
  </svg>
);

export const StabilityIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" {...props}>
    <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.4a9.6 9.6 0 110 19.2 9.6 9.6 0 010-19.2zm-3.6 4.8v9.6h2.4V7.2H8.4zm4.8 0v9.6h2.4V7.2h-2.4z" />
  </svg>
);

export const FluxIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" {...props}>
    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
  </svg>
);

export const FalIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg
    viewBox="0 0 512 512"
    xmlns="http://www.w3.org/2000/svg"
    fillRule="evenodd"
    clipRule="evenodd"
    strokeLinejoin="round"
    strokeMiterlimit={2}
    width="1em"
    height="1em"
    {...props}
  >
    <path
      d="M330.176 0c8.864 0 16 7.2 16.8 16.032a166.368 166.368 0 00148.992 148.992c8.8.864 16.032 7.968 16.032 16.832v148.288c0 8.864-7.232 15.968-16.032 16.832a166.368 166.368 0 00-148.992 148.992c-.8 8.832-7.936 16.032-16.8 16.032H181.856c-8.864 0-15.968-7.2-16.832-16.032a166.4 166.4 0 00-148.992-148.992C7.2 346.112 0 339.008 0 330.144V181.856c0-8.864 7.2-15.968 16.032-16.832A166.4 166.4 0 00165.024 16.032C165.888 7.2 172.992 0 181.888 0h148.288zM102.816 255.584v.064c0 84.544 69.536 154.112 154.08 154.176 84.544-.064 154.08-69.632 154.08-154.176v-.064a154.144 154.144 0 00-154.08-154.24c-84.576.032-154.144 69.664-154.08 154.24z"
      fill="currentColor"
    />
  </svg>
);

// =============================================================================
// Provider Icon Registry
// =============================================================================

type IconComponent = React.FC<React.SVGProps<SVGSVGElement>>;

/**
 * Map of provider IDs to their icon components.
 * Includes both API sources and model origins.
 */
export const PROVIDER_ICONS: Record<string, IconComponent> = {
  // API Sources (aggregators)
  openrouter: OpenRouterIcon,
  replicate: ReplicateIcon,
  fal: FalIcon,
  ollama: OllamaIcon,
  lmstudio: LMStudioIcon,

  // Major providers (react-icons)
  openai: SiOpenai as unknown as IconComponent,
  anthropic: SiAnthropic as unknown as IconComponent,
  google: FaGoogle as unknown as IconComponent,

  // Other providers (custom icons)
  meta: MetaIcon,
  'meta-llama': MetaIcon,
  mistral: MistralIcon,
  mistralai: MistralIcon,
  'stability-ai': StabilityIcon,
  'black-forest-labs': FluxIcon,
};

// =============================================================================
// Helper Functions
// =============================================================================

/**
 * Get the icon component for a provider.
 * Returns undefined if no icon exists for the provider.
 */
export function getProviderIcon(provider: string): IconComponent | undefined {
  const normalized = provider.toLowerCase().replace(/\s+/g, '-');
  return PROVIDER_ICONS[normalized];
}

/**
 * Extract the provider/owner from a model ID.
 * Model IDs typically follow the format: "owner/model-name"
 */
export function extractProviderFromModelId(modelId: string): string {
  const parts = modelId.split('/');
  return parts[0] || modelId;
}

/**
 * Get provider display info including icon and label.
 */
export function getProviderInfo(providerId: string): {
  icon: IconComponent | undefined;
  label: string;
} {
  const normalized = providerId.toLowerCase().replace(/\s+/g, '-');
  const icon = PROVIDER_ICONS[normalized];

  // Human-readable labels
  const labels: Record<string, string> = {
    openrouter: 'OpenRouter',
    replicate: 'Replicate',
    fal: 'Fal',
    ollama: 'Ollama',
    lmstudio: 'LM Studio',
    openai: 'OpenAI',
    anthropic: 'Anthropic',
    google: 'Google',
    meta: 'Meta',
    'meta-llama': 'Meta',
    mistral: 'Mistral',
    mistralai: 'Mistral',
    'stability-ai': 'Stability AI',
    'black-forest-labs': 'Black Forest Labs',
    deepseek: 'DeepSeek',
    qwen: 'Qwen',
  };

  return {
    icon,
    label: labels[normalized] || providerId,
  };
}

export default PROVIDER_ICONS;
